{"version":3,"sources":["../src/encrypt.js"],"names":["require","scrolex","persistOpts","announce","addCommandAsComponent","components","main","module","failure","process","argv","exit","exports","runtime","cb","exe","cwd","gitRoot","ghPagesEnv","GHPAGES_URL","Error","key"],"mappings":";;;;AAAAA,QAAQ,gBAAR;AACA;AACA,IAAMC,UAAUD,QAAQ,SAAR,EAAmBE,WAAnB,CAA+B;AAC7CC,YAAuB,IADsB;AAE7CC,yBAAuB,IAFsB;AAG7CC;AAH6C,CAA/B,CAAhB;;AAMA,IAAIL,QAAQM,IAAR,KAAiBC,MAArB,EAA6B;AAC3BN,UAAQO,OAAR,+DAA4EC,QAAQC,IAAR,CAAa,CAAb,CAA5E;AACAD,UAAQE,IAAR,CAAa,CAAb;AACD;;AAEDJ,OAAOK,OAAP;AAAA,uDAAiB,iBAAOC,OAAP,EAAgBC,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACTb,QAAQc,GAAR,CAAY,0EAAZ,EAAwF,EAAEC,KAAKH,QAAQI,OAAf,EAAwBZ,YAAY,gBAApC,EAAxF,CADS;;AAAA;AAAA,gBAGVQ,QAAQK,UAAR,CAAmBC,WAHT;AAAA;AAAA;AAAA;;AAAA,6CAINL,GAAG,IAAIM,KAAJ,CAAU,uDAAV,CAAH,CAJM;;AAAA;AAAA,kDAOGP,QAAQK,UAPX;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOJG,eAPI;;AAAA,iBAQTR,QAAQK,UAAR,CAAmBG,GAAnB,CARS;AAAA;AAAA;AAAA;;AAAA;AAAA,mBASLpB,QAAQc,GAAR,2DAAoEM,GAApE,UAA4EA,GAA5E,EAAmF,EAAEL,KAAKH,QAAQI,OAAf,EAAwBZ,YAAY,gBAApC,EAAnF,CATK;;AAAA;AAAA;AAAA;;AAAA;;AAafS,eAAG,IAAH;;AAbe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA;;;;;;;;gCAXMb,O","file":"encrypt.js","sourcesContent":["require('babel-polyfill')\n// const utils = require('./utils')\nconst scrolex = require('scrolex').persistOpts({\n  announce             : true,\n  addCommandAsComponent: true,\n  components           : `lanyon>encrypt`,\n})\n\nif (require.main === module) {\n  scrolex.failure(`Please only used this module via require, or: src/cli.js ${process.argv[1]}`)\n  process.exit(1)\n}\n\nmodule.exports = async (runtime, cb) => {\n  await scrolex.exe('[ -f env.sh ] || (touch env.sh && chmod 600 env.sh && git ignore env.sh)', { cwd: runtime.gitRoot, components: 'lanyon>encrypt' })\n\n  if (!runtime.ghPagesEnv.GHPAGES_URL) {\n    return cb(new Error('GHPAGES_URL was not set. Did you source env.sh first?'))\n  }\n\n  for (const key in runtime.ghPagesEnv) {\n    if (runtime.ghPagesEnv[key]) {\n      await scrolex.exe(`travis encrypt --skip-version-check --add env.global ${key}=$${key}`, { cwd: runtime.gitRoot, components: 'lanyon>encrypt' })\n    }\n  }\n\n  cb(null)\n}\n"]}